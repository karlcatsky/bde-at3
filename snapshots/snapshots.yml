version: 2

snapshots:
  - name: host_snapshot
    relation: ref('s_dim_hosts')
    config:
      strategy: timestamp
      unique_key: host_id::text  # int key must be hashable
      updated_at: last_updated
  
  - name: property_snapshot
    relation: ref('s_dim_property_types')
    config:
      strategy: timestamp
      unique_key: property_type_id
      updated_at: last_updated

  - name: room_snapshot
    relation: ref('s_dim_room_types')
    config:
      strategy: timestamp
      unique_key: room_type_id
      updated_at: last_updated

  - name: listing_snapshot 
    relation: ref('s_dim_listings') 
    config: 
      strategy: timestamp 
      unique_key: listing_id::text # int key must be hashable 
      updated_at: last_updated 

# DEPR: 
  # - name: lga_snapshot 
  #   relation: ref('s_dim_LGAs')
  #   config:
  #     strategy: timestamp
  #     unique_key: lga_code
  #     updated_at: census_date
  
  # - name: suburb_snapshot
  #   relation: ref('s_dim_suburbs')
  #   config:
  #     strategy: timestamp
  #     unique_key: suburb_id
  #     updated_at: census_date